define(["app"],function(e){e.controller("EventsCtrl",["$scope","$http","$location","$filter","calendar",function(e,t,n,r,i){e.predicate="start",e.reverse=!1,e.currentPage=1,e.pageSize=50,e.totalAmt=1,e.pageChanged=function(){},0!=i.length&&i.splice(0,i.length),e.$watch("search.title",function(){e.currentPage=1,"undefined"!=typeof e.search&&(e.filtered=r("filter")(e.bookingList,e.search.title),e.totalAmt=e.filtered.length)}),e.$watch("search.desc",function(){e.currentPage=1,"undefined"!=typeof e.search&&(e.filtered=r("filter")(e.bookingList,e.search.desc),e.totalAmt=e.filtered.length)}),e.$watch("search.conf",function(){e.currentPage=1,"undefined"!=typeof e.search&&(e.filtered=r("filter")(e.bookingList,e.search.conf),e.totalAmt=e.filtered.length)});var o=function(t){var n=i;e.totalAmt=t.length;for(var r=0;r<t.length;r++){var o=t[r],a={start:o.start,end:o.end,allDay:o.allDay,title:o.title,desc:o.desc,avail:o.avail,id:o._id,conf:o.conf,close:!0,info:[]};n.push(a)}e.bookingList=Immutable.List(n),t=null};getHTTP(t,bookingListURL,o);var a=function(t){"undefined"!=typeof t&&"undefined"!=typeof t.success&&(e.rpt_allowed=!0)};getHTTP(t,reportURL,a),e.genReport=function(){var n=function(){e.rpt_disabled=!0},r=function(t){e.showAlert("error",t.error)},i=function(){e.showAlert("error","Please try again later, or inform the admin.")};funcHTTP(t,"POST",reportGenUrl,{},n,r,i)},e.listUsers=function(e){var t=e.$oid;n.url("userlist/"+t)}}])});