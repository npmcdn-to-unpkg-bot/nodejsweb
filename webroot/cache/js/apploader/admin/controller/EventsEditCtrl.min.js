define(["app"],function(e){e.controller("EventsEditCtrl",["$scope","$http","$route","$location","$filter","$mdDialog",function(e,t,n,r,a,o){e.predicate="start",e.reverse=!1,e.currentPage=1,e.pageSize=50,e.totalAmt=1,e.pageChanged=function(){},e.$watch("search.title",function(){e.currentPage=1,"undefined"!=typeof e.search&&(e.filtered=a("filter")(e.bookingList,e.search.title),e.totalAmt=e.filtered.length)}),e.$watch("search.desc",function(){e.currentPage=1,"undefined"!=typeof e.search&&(e.filtered=a("filter")(e.bookingList,e.search.desc),e.totalAmt=e.filtered.length)}),e.$watch("search.conf",function(){e.currentPage=1,"undefined"!=typeof e.search&&(e.filtered=a("filter")(e.bookingList,e.search.conf),e.totalAmt=e.filtered.length)});var i=function(t){var n=[];e.totalAmt=t.length;for(var r=0;r<t.length;r++){var a=t[r],o={start:a.start,end:a.end,allDay:a.allDay,title:a.title,desc:a.desc,avail:a.avail,id:a._id,conf:a.conf};n.push(o)}e.bookingList=Immutable.List(n),t=null};getHTTP(t,editableEventListUrl,i),e.removeEvent=function(r,a){e.flag=!0,e.formData={_id:r};var i=o.confirm().title("Remove Event").content("Are you sure to remove the event, it will not be recoverable?").ariaLabel("Good Luck").ok("Yes").cancel("No").targetEvent(a);o.show(i).then(function(){var r=function(){n.reload(),e.flag=!1},o=function(t){e.showAlert(a,t.errors),e.flag=!1},i=function(){e.showAlert(a,"Please try again later, or inform the us."),e.flag=!1};funcHTTP(t,"DELETE",editableEventListUrl,e.formData,r,o,i)},function(){e.flag=!1})},e.showAlert=function(e,t){o.show(o.alert().title("Opps, Error Encountered").content(t).ariaLabel("Error").ok("Ok!").targetEvent(e))}}])});