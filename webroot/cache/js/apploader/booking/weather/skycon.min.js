"use strict";!function(global){define(["skycon","moment"],function(skycon,moment){function obtainDate(e,n){switch(n){case 0:return moment(e).format("MMM Do, YYYY hh:mm");case 1:return moment(e).format("MMM Do, YYYY")}}function initWebSocket(ws){ws.onmessage=function(event){var receivedJson=JSON.parse(event.data),icon=Skycons.UNKNOWN;switch(receivedJson.icon){case"clear-day":icon=Skycons.CLEAR_DAY;break;case"clear-night":icon=Skycons.CLEAR_NIGHT;break;case"rain":icon=Skycons.RAIN;break;case"snow":icon=Skycons.SNOW;break;case"sleet":icon=Skycons.SLEET;break;case"wind":icon=Skycons.WIND;break;case"fog":icon=Skycons.FOG;break;case"cloudy":icon=Skycons.CLOUDY;break;case"partly-cloudy-day":icon=Skycons.PARTLY_CLOUDY_DAY;break;case"partly-cloudy-night":icon=Skycons.PARTLY_CLOUDY_NIGHT;break;default:icon=Skycons.UNKNOWN}if(icon==Skycons.UNKNOWN)skycons.remove("weatherIcon");else{skycons.set("weatherIcon",icon),$("#weatherMessage").text(receivedJson.summary);var date=new Date(eval(receivedJson.date));$("#weatherDate").text(obtainDate(date,1))}},ws.onclose=function(){console.log("Connection closed")}}function waitForSocketConnection(e,n){setTimeout(function(){return 1===e.readyState?(void 0!==n&&n(),void 0):(waitForSocketConnection(e,n),void 0)},5)}var skycons=new Skycons({color:"#09F"});skycons.add("weatherIcon",Skycons.UNKNOWN),skycons.play();var ws=new WebSocket(weatherSocketURL);return initWebSocket(ws),{sendMessage:function(e,n){waitForSocketConnection(ws,function(){ws.send('{"state":"'+e+'", "date":"'+n+'"}')})}}})}(this);