define(["app","modalInstance"],function(t){function s(t){for(var s=0;s<t.chkHostList.length;s++){var r=t.chkHostList[s];r.initStat=r.currStat}}function r(t){if("undefined"!=typeof t.chkHostList){for(var s=[],r=[],o=0;o<t.chkHostList.length;o++){var a=t.chkHostList[o];a.currStat!=a.initStat&&(1==a.currStat&&s.push(a._id.$oid),0==a.currStat&&r.push(a._id.$oid))}var i={subs:s,unsubs:r};return i}}t.controller("SubscriptionCtrl",["$scope","$http","$modal","$routeParams",function(t,o,a){t.predicate="cName",t.reverse=!1;var i=function(s){t.subHostList=s,t.chkHostList=[];for(var r=0;r<t.subHostList.length;r++){var o=t.subHostList[r];t.chkHostList.push({_id:o._id,cDesc:o.cDesc,cName:o.cName,ext:o.ext,initStat:o.subscribed,currStat:o.subscribed})}t.subHostList=null};getHTTP(o,subsHostListURL,i),t.save=function(){if(!t.flag){t.flag=!0,t.formData=r(t);var a=function(){s(t),t.open(),t.flag=!1},i=function(s){t.errors=s.errors,t.flag=!1},c=function(s){t.errors=s.errors,t.flag=!1};funcHTTP(o,"POST",subsHostListURL,t.formData,a,i,c)}},t.cancel=cancelBtn,t.open=function(){a.open({templateUrl:"popupdialog.html",controller:"ModalInstanceCtrl",backdrop:"static",resolve:{}})},t.imageURL=cpImageURL}])});