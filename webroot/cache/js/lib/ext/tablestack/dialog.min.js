!function(e,t){e.componentNamespace=e.componentNamespace||e;var s,o,n="dialog",i=e.document,a=i.documentElement,c=i.body,l=t(a),r=e.componentNamespace.Dialog=function(e){this.$el=t(e),this.$background=t(i.createElement("div")).addClass(s.bkgd).appendTo("body"),this.hash=this.$el.attr("id")+"-dialog",this.isOpen=!1,this.positionMedia=this.$el.attr("data-set-position-media"),this.isTransparentBackground=this.$el.is("[data-transbg]")};r.events=o={open:n+"-open",close:n+"-close"},r.classes=s={open:n+"-open",opened:n+"-opened",content:n+"-content",close:n+"-close",closed:n+"-closed",bkgd:n+"-background",bkgdOpen:n+"-background-open",bkgdTrans:n+"-background-trans"},r.prototype.isSetScrollPosition=function(){return!this.positionMedia||e.matchMedia&&e.matchMedia(this.positionMedia).matches},r.prototype.destroy=function(){this.$background.remove()},r.prototype.open=function(){this.$background[0].style.height=Math.max(a.scrollHeight,a.clientHeight)+"px",this.$el.addClass(s.open),this.$background.addClass(s.bkgdOpen),this._setBackgroundTransparency(),this.isSetScrollPosition()?(this.scroll="pageYOffset"in e?e.pageYOffset:a.scrollY||a.scrollTop||c&&c.scrollY||0,this.$el[0].style.top=this.scroll+"px"):this.$el[0].style.top="",l.addClass(s.open),this.isOpen=!0,location.hash=this.hash,i.activeElement&&(this.focused=i.activeElement),this.$el[0].focus(),this.$el.trigger(s.opened)},r.prototype._setBackgroundTransparency=function(){this.isTransparentBackground&&this.$background.addClass(s.bkgdTrans)},r.prototype.close=function(){this.isOpen&&(this.$el.removeClass(s.open),this.$background.removeClass(s.bkgdOpen),l.removeClass(s.open),this.focused&&this.focused.focus(),this.isSetScrollPosition()&&e.scrollTo(0,this.scroll),this.isOpen=!1,this.$el.trigger(s.closed))}}(this,jQuery),function(e,t){var s=e.componentNamespace.Dialog,o=document;t.fn.dialog=function(){return this.each(function(){var n=t(this),i=new s(this);n.data("instance",i),n.addClass(s.classes.content).attr("role","dialog").attr("tabindex",0).bind(s.events.open,t.proxy(i,"open")).bind(s.events.close,t.proxy(i,"close")).bind("click",function(o){t(o.target).is("."+s.classes.close)&&(e.history.back(),o.preventDefault())}),i.$background.bind("click",function(){e.history.back()}),t(e).bind("hashchange",function(){var t=e.location.hash.replace("#","");t!==i.hash&&i.close()}),t(o).bind("click",function(e){var o=t(e.target).closest("a");if(!i.isOpen&&o.length&&o.attr("href")){var a=t(o.attr("href"));a.length&&a.is(n)&&(a.trigger(s.events.open),e.preventDefault())}}),t(o).bind("keyup",function(e){27===e.which&&i.close()})})},t(function(){t(".dialog").dialog()})}(this,jQuery);