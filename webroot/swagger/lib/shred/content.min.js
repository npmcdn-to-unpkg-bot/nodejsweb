var Content=function(t){this.body=t.body,this.data=t.data,this.type=t.type};Content.prototype={},Object.defineProperties(Content.prototype,{type:{get:function(){if(this._type)return this._type;if(this._data)switch(typeof this._data){case"string":return"text/plain";case"object":return"application/json"}return"text/plain"},set:function(t){return this._type=t,this},enumerable:!0},data:{get:function(){return this._body?this.processor.parser(this._body):this._data},set:function(t){return this._body&&t&&Errors.setDataWithBody(this),this._data=t,this},enumerable:!0},body:{get:function(){return this._data?this.processor.stringify(this._data):this._body.toString()},set:function(t){return this._data&&t&&Errors.setBodyWithData(this),this._body=t,this},enumerable:!0},processor:{get:function(){var t=Content.processors[this.type];if(t)return t;for(var e=this.type.split(";")[0],r=e.split(/\+|\//),n=0,o=r.length;o>n;n++)t=Content.processors[r[n]];return t||{parser:identity,stringify:toString}},enumerable:!0},length:{get:function(){return"undefined"!=typeof Buffer?Buffer.byteLength(this.body):this.body.length}}}),Content.processors={},Content.registerProcessor=function(t,e){t.forEach?t.forEach(function(t){Content.processors[t]=e}):Content.processors[t]=e};var identity=function(t){return t},toString=function(t){return t.toString()};Content.registerProcessor(["text/html","text/plain","text"],{parser:identity,stringify:toString}),Content.registerProcessor(["application/json; charset=utf-8","application/json","json"],{parser:function(t){return JSON.parse(t)},stringify:function(t){return JSON.stringify(t)}});var qs=require("querystring");Content.registerProcessor(["application/x-www-form-urlencoded"],{parser:qs.parse,stringify:qs.stringify});var Errors={setDataWithBody:function(){throw new Error("Attempt to set data attribute of a content object when the body attributes was already set.")},setBodyWithData:function(){throw new Error("Attempt to set body attribute of a content object when the data attributes was already set.")}};module.exports=Content;