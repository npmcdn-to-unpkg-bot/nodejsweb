function handleLogin(){var o=[];if(window.swaggerUi.api.authSchemes&&window.swaggerUi.api.authSchemes.oauth2&&window.swaggerUi.api.authSchemes.oauth2.scopes&&(o=window.swaggerUi.api.authSchemes.oauth2.scopes),window.swaggerUi.api&&window.swaggerUi.api.info&&(appName=window.swaggerUi.api.info.title),popupDialog.length>0)popupDialog=popupDialog.last();else for(popupDialog=$(['<div class="api-popup-dialog">','<div class="api-popup-title">Select OAuth2.0 Scopes</div>','<div class="api-popup-content">',"<p>Scopes are used to grant an application different levels of access to data on behalf of the end user. Each API may declare one or more scopes.",'<a href="#">Learn how to use</a>',"</p>","<p><strong>"+appName+"</strong> API requires the following scopes. Select which ones you want to grant to Swagger UI.</p>",'<ul class="api-popup-scopes">',"</ul>",'<p class="error-msg"></p>','<div class="api-popup-actions"><button class="api-popup-authbtn api-button green" type="button">Authorize</button><button class="api-popup-cancel api-button gray" type="button">Cancel</button></div>',"</div>","</div>"].join("")),$(document.body).append(popupDialog),popup=popupDialog.find("ul.api-popup-scopes").empty(),i=0;i<o.length;i++)scope=o[i],str='<li><input type="checkbox" id="scope_'+i+'" scope="'+scope.scope+'"/><label for="scope_'+i+'">'+scope.scope,scope.description&&(str+='<br/><span class="api-scope-desc">'+scope.description+"</span>"),str+="</label></li>",popup.append(str);var p=$(window),e=p.width(),a=p.height(),n=p.scrollTop(),t=popupDialog.outerWidth(),s=popupDialog.outerHeight(),c=(a-s)/2+n,r=(e-t)/2;popupDialog.css({top:(0>c?0:c)+"px",left:(0>r?0:r)+"px"}),popupDialog.find("button.api-popup-cancel").click(function(){popupMask.hide(),popupDialog.hide()}),popupDialog.find("button.api-popup-authbtn").click(function(){popupMask.hide(),popupDialog.hide();var o=window.swaggerUi.api.authSchemes,i=window.location,p=location.pathname.substring(0,location.pathname.lastIndexOf("/")),e=i.protocol+"//"+i.host+p+"/o2c.html",a=null;for(var n in o)if(o.hasOwnProperty(n)){var t=o[n].grantTypes;for(var s in t)if(t.hasOwnProperty(s)&&"implicit"===s){var c=t[s];a=c.loginEndpoint.url+"?response_type=token",window.swaggerUi.tokenName=c.tokenName}}var r=[],t=$(".api-popup-scopes").find("input:checked");for(k=0;k<t.length;k++)r.push($(t[k]).attr("scope"));window.enabledScopes=r,a+="&redirect_uri="+encodeURIComponent(e),a+="&realm="+encodeURIComponent(realm),a+="&client_id="+encodeURIComponent(clientId),a+="&scope="+encodeURIComponent(r),window.open(a)}),popupMask.show(),popupDialog.show()}function handleLogout(){for(key in window.authorizations.authz)window.authorizations.remove(key);window.enabledScopes=null,$(".api-ic.ic-on").addClass("ic-off"),$(".api-ic.ic-on").removeClass("ic-on"),$(".api-ic.ic-warning").addClass("ic-error"),$(".api-ic.ic-warning").removeClass("ic-warning")}function initOAuth(o){var i=o||{},p=[];return appName=i.appName||p.push("missing appName"),popupMask=i.popupMask||$("#api-common-mask"),popupDialog=i.popupDialog||$(".api-popup-dialog"),clientId=i.clientId||p.push("missing client id"),realm=i.realm||p.push("missing realm"),p.length>0?(log("auth unable initialize oauth: "+p),void 0):($("pre code").each(function(o,i){hljs.highlightBlock(i)}),$(".api-ic").click(function(o){$(o.target).hasClass("ic-off")?handleLogin():handleLogout()}),void 0)}function onOAuthComplete(o){if(o)if(o.error){var i=$("input[type=checkbox],.secured");i.each(function(o){i[o].checked=!1}),alert(o.error)}else{var p=o[window.swaggerUi.tokenName];if(p){var e=null;$.each($(".auth #api_information_panel"),function(o,i){var p=i;if(p&&p.childNodes){var a=[];$.each(p.childNodes,function(o,i){var p=i.innerHTML;p&&a.push(p)});for(var n=[],t=0;t<a.length;t++){var s=a[t];window.enabledScopes&&-1==window.enabledScopes.indexOf(s)&&n.push(s)}n.length>0?(e=i.parentNode,$(e.parentNode).find(".api-ic.ic-on").addClass("ic-off"),$(e.parentNode).find(".api-ic.ic-on").removeClass("ic-on"),$(e).find(".api-ic").addClass("ic-warning"),$(e).find(".api-ic").removeClass("ic-error")):(e=i.parentNode,$(e.parentNode).find(".api-ic.ic-off").addClass("ic-on"),$(e.parentNode).find(".api-ic.ic-off").removeClass("ic-off"),$(e).find(".api-ic").addClass("ic-info"),$(e).find(".api-ic").removeClass("ic-warning"),$(e).find(".api-ic").removeClass("ic-error"))}}),window.authorizations.add("oauth2",new ApiKeyAuthorization("Authorization","Bearer "+p,"header"))}}}var appName,popupMask,popupDialog,clientId,realm;